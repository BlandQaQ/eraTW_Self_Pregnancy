;隨時存檔，顧名思義即使在任何時候都能調用的存檔功能，不過事實上是給游戲過程中用的，睡覺時候本來就有了也不需要這個，所以睡覺時不能調用（那還叫什麽隨時）
;不確定tw能不能支持，如果能就好了，不能隨時存檔還是挺麻煩的，能用把這句話刪了
@隨時操作存檔
#DIM 最大存檔數量
#DIM 存檔編號
#DIM 操作模式 = 1001        ;1001為存檔，1002為讀檔，1003為刪檔，默認模式為存檔
#DIM 最大頁數               ;每頁顯示20個存檔位加一個99號自動存檔位
#DIM 頁碼 = 1
#DIM 行數
#DIM 選擇的存檔位
#DIMS 存檔備注信息
#DIMS 用戶自定義備注信息
#DIM 彩蛋計數器              ;圖一樂
SAVENOS 最大存檔數量
用戶自定義備注信息 = 
最大頁數 = 最大存檔數量 / 20
SIF 最大存檔數量 % 20
    最大頁數 ++
行數 = LINECOUNT
彩蛋計數器 = 0
$開始位置
CUSTOMDRAWLINE ━
PRINT 請選擇要
SELECTCASE 操作模式
    CASE 1001
        PRINT 存儲
    CASE 1002
        PRINT 讀取
    CASE 1003
        PRINT 刪除
    CASEELSE
        THROW 模式錯誤，無法進行存檔操作
ENDSELECT
PRINTFORML 的存檔位置 - 第{頁碼}/{最大頁數}頁
DRAWLINE
SELECTCASE 操作模式
    CASE 1001
        SETCOLOR C_YELLOW
        PRINT [存檔]
        RESETCOLOR
        PRINTBUTTON "[讀檔]", 1002
        PRINTBUTTON "[刪檔]", 1003
    CASE 1002
        PRINTBUTTON "[存檔]", 1001
        SETCOLOR C_YELLOW
        PRINT [讀檔]
        RESETCOLOR
        PRINTBUTTON "[刪檔]", 1003
    CASE 1003
        PRINTBUTTON "[存檔]", 1001
        PRINTBUTTON "[讀檔]", 1002
        SETCOLOR C_YELLOW
        PRINT [刪檔]
        RESETCOLOR
ENDSELECT
PRINTL
CUSTOMDRAWLINE ━
FOR 存檔編號, 20 * (頁碼 - 1), MIN(20 * 頁碼, 最大存檔數量)
    VARSET RESULT:0
    RESULTS:0 = 
    CHKDATA 存檔編號
    SELECTCASE RESULT:0
        CASE 0
            PRINTFORML [{存檔編號}] - %RESULTS:0%
        CASE 1
            SETCOLOR C_L_GRAY
            PRINTFORML [{存檔編號}] ------
            RESETCOLOR
        CASE 2
            SETCOLOR C_RED
            PRINTFORML [{存檔編號}] - %RESULTS:0% - 非本游戲的存檔
            RESETCOLOR
        CASE 3
            SETCOLOR C_ORANGE
            PRINTFORML [{存檔編號}] - %RESULTS:0% - 存檔版本號與游戲不一致
            RESETCOLOR
        CASE 4
            SETCOLOR C_P_PURPLE
            PRINTFORML [{存檔編號}] - %RESULTS:0% - 存在其他問題的存檔
            RESETCOLOR
    ENDSELECT
NEXT
VARSET RESULT:0
RESULTS:0 = 
CHKDATA 99
SELECTCASE RESULT:0
        CASE 0
            PRINTFORML [99] - %RESULTS:0%
        CASE 1
            SETCOLOR C_L_GRAY
            PRINTFORML [99] ------
            RESETCOLOR
        CASE 2
            SETCOLOR C_RED
            PRINTFORML [99] - %RESULTS:0% - 非本游戲的存檔
            RESETCOLOR
        CASE 3
            SETCOLOR C_ORANGE
            PRINTFORML [99] - %RESULTS:0% - 存檔版本號與游戲不一致
            RESETCOLOR
        CASE 4
            SETCOLOR C_P_PURPLE
            PRINTFORML [99] - %RESULTS:0% - 存在其他問題的存檔
            RESETCOLOR
ENDSELECT
SIF 頁碼 > 1
    PRINTFORM 上一頁[998, 3]
SIF 頁碼 < 4 && 20 * 頁碼 < 最大存檔數量
    PRINTFORM 下一頁[999, 3]
PRINTL
PRINTFORML 退出[1000]
CUSTOMDRAWLINE ━
INPUT
SELECTCASE RESULT
    CASE 998
        頁碼 --
        CLEARLINE LINECOUNT - 行數
        GOTO 開始位置
    CASE 999
        頁碼 ++
        CLEARLINE LINECOUNT - 行數
        GOTO 開始位置
    CASE 1000
        CLEARLINE LINECOUNT - 行數
        RETURN 0
    CASE 1001
        SIF 操作模式 != 1001
            操作模式 = 1001
        CLEARLINE LINECOUNT - 行數
        GOTO 開始位置
    CASE 1002
        SIF 操作模式 != 1002
            操作模式 = 1002
        CLEARLINE LINECOUNT - 行數
        GOTO 開始位置
    CASE 1003
        SIF 操作模式 != 1003
            操作模式 = 1003
        CLEARLINE LINECOUNT - 行數
        GOTO 開始位置    
    CASEELSE
        IF INRANGE(RESULT, 0, 最大存檔數量)
            選擇的存檔位 = RESULT
            VARSET RESULT:0
            RESULTS:0 = 
            CHKDATA 選擇的存檔位
            IF RESULT != 1
                PRINTFORM 已存在存檔{選擇的存檔位}，備注信息：
                PRINTFORML %RESULTS:0%
                PRINT 是否要
                SELECTCASE 操作模式
                    CASE 1001
                        PRINTL 替換該存檔？
                        CALL ASK_YN
                        IF !RESULT
                            GETTIME
                            存檔備注信息 = %RESULTS:0% 第{DAY:0}日
                            PRINTL 需要添加備注信息嗎？
                            CALL ASK_YN
                            IF !RESULT
                                INPUTS
                                用戶自定義備注信息 = %RESULTS%
                            ELSE
                                用戶自定義備注信息 = 
                            ENDIF
                            存檔備注信息 += " "
                            存檔備注信息 += @"%用戶自定義備注信息%"
                            SAVEDATA 選擇的存檔位, 存檔備注信息
                            PRINTFORMW 已存檔{選擇的存檔位}，存檔備注信息：%存檔備注信息%
                            CLEARLINE LINECOUNT - 行數
                            GOTO 開始位置
                        ELSE
                            PRINTW 未替換存檔
                            CLEARLINE LINECOUNT - 行數
                            GOTO 開始位置
                        ENDIF
                    CASE 1002
                        PRINTL 讀取該存檔？
                        CALL ASK_YN
                        IF !RESULT
                            LOADDATA 選擇的存檔位
                        ELSE
                            PRINTW 未讀取存檔
                            CLEARLINE LINECOUNT - 行數
                            GOTO 開始位置
                        ENDIF
                    CASE 1003
                        PRINTL 刪除該存檔？
                        CALL ASK_YN
                        IF !RESULT
                            SETCOLOR C_RED
                            PRINTL 注意：你正在執行刪除存檔的操作，此操作不可逆
                            PRINTL 確定要刪除存檔{選擇的存檔位}嗎？
                            CALL ASK_YN
                            RESETCOLOR
                            IF !RESULT
                                PRINTL 刪除存檔{選擇的存檔位}
                                DELDATA 選擇的存檔位
                                PRINTFORMW 存檔{選擇的存檔位}刪除完成
                                CLEARLINE LINECOUNT - 行數
                                GOTO 開始位置
                            ELSE
                                PRINTW 未刪除存檔
                                CLEARLINE LINECOUNT - 行數
                                GOTO 開始位置
                            ENDIF
                        ELSE
                            PRINTW 未刪除存檔
                            CLEARLINE LINECOUNT - 行數
                            GOTO 開始位置
                        ENDIF
                    CASEELSE
                        THROW 模式錯誤，無法進行存檔操作
                ENDSELECT
            ELSE
                SELECTCASE 操作模式
                    CASE 1001
                        PRINTFORML 要將存檔存儲在{選擇的存檔位}嗎？
                        CALL ASK_YN
                        IF !RESULT
                            GETTIME
                            存檔備注信息 = %RESULTS:0% 第{DAY:0}日
                            PRINTL 需要添加備注信息嗎？
                            CALL ASK_YN
                            IF !RESULT
                                INPUTS
                                用戶自定義備注信息 = %RESULTS%
                            ELSE
                                用戶自定義備注信息 = 
                            ENDIF
                            存檔備注信息 += " "
                            存檔備注信息 += @"%用戶自定義備注信息%"
                            SAVEDATA 選擇的存檔位, 存檔備注信息
                            PRINTFORMW 已存檔{選擇的存檔位}，存檔備注信息：%存檔備注信息%
                            CLEARLINE LINECOUNT - 行數
                            GOTO 開始位置
                        ELSE
                            PRINTW 未存儲存檔
                            CLEARLINE LINECOUNT - 行數
                            GOTO 開始位置
                        ENDIF
                    CASE 1002
                        PRINTW 此處沒有存檔文件
                        CLEARLINE LINECOUNT - 行數
                        GOTO 開始位置
                    CASE 1003
                        PRINTW 此處沒有存檔文件
                        CLEARLINE LINECOUNT - 行數
                        GOTO 開始位置
                ENDSELECT
            ENDIF
        ELSE
            IF INRANGE(彩蛋計數器, 0, 3)
                PRINTW 超出最大存檔範圍
                彩蛋計數器 ++
                CLEARLINE LINECOUNT - 行數
                GOTO 開始位置
            ELSEIF INRANGE(彩蛋計數器, 4, 8)
                PRINTL 不去和少女們卿卿我我而是在這裏玩存檔？
                PRINTW 存檔有啥好玩的
                PRINTW 趕緊存好檔退出去啦
                彩蛋計數器 ++
                CLEARLINE LINECOUNT - 行數
                GOTO 開始位置
            ELSEIF 彩蛋計數器 == 9
                SETCOLOR C_RED
                PRINTW 試圖把我激怒
                RESETCOLOR
                彩蛋計數器 ++
                CLEARLINE LINECOUNT - 行數
                GOTO 開始位置
            ELSEIF 彩蛋計數器 >= 10
                PRINTW 服了你了，對著存檔能玩這麽久，
                PRINTW 恭喜你發現一個小彩蛋
                CALL CHOICE("選擇想打開的彩蛋吧", "豬", "狗", "猴")
                SELECTCASE RESULT
                    CASE 0
                        PRINTL .
                        TWAIT 100, 0
                        PRINTL ..
                        TWAIT 200, 0
                        PRINTL ...
                        TWAIT 300, 0
                        PRINTL ....
                        TWAIT 400, 0
                        PRINTL .....
                        TWAIT 500, 0
                        PRINTL ......
                        TWAIT 600, 0
                        PRINTL 操！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
                        PRINTL 我的原子彈回來啦！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
                        PRINTL 嗷！！！！！！！！！！！！！！
                        PRINTL 原子彈！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
                        PRINTL 菲爾米諾！！！！！！！
                        PRINTL 蕪！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
                        PRINTL 完美的鏟球！！！！！！！
                        PRINTL 超！！！！！！！
                        PRINTL 好冷靜啊我這脚踢的！！！！！！！！！！！！！！！！！！！
                        PRINTL 我超我踢的好冷靜啊！！！！！！！
                        PRINTL 蕪！！！！！！！！！！完美的配合！！！！！！！！！！！！！
                        PRINTL 蕪！完美的頭球，馬内！！！！！！！
                        PRINTL 我們給他來個絕殺吧？
                        PRINTL 臥槽！！！！！
                        PRINTW 別！！！！！！！！！！！！！！！！！！！！！！！！！！！！
                    CASE 1
                        PRINTL 就，之前，可能還，有人，對我的s，s6登頂，沒有什麽概念
                        TWAIT 300, 0
                        PRINTL 我今天再給大夥講一次
                        TWAIT 300, 0
                        PRINTL 首先
                        PRINTL 你要知道
                        PRINTL 現在的
                        PRINTL S11了
                        PRINTL 好像已經S11了
                        PRINTL 我跟你説我當年的s登頂
                        PRINTL 前十都是什麽樣的人
                        PRINTW 這就要打開我的文本了
                        PRINTL OK，前十是誰呢
                        TWAIT 500, 0
                        PRINTL JKL
                        TWAIT 100, 0
                        PRINTL MING
                        TWAIT 100, 0
                        PRINTL NING
                        TWAIT 100, 0
                        PRINTL DOPA
                        TWAIT 100, 0
                        PRINTL THESHY
                        TWAIT 100, 0
                        PRINTL RUO
                        TWAIT 100, 0
                        PRINTL XIYE
                        TWAIT 100, 0
                        PRINTL MLXG
                        TWAIT 100, 0
                        PRINTL 白色風車
                        TWAIT 100, 0
                        PRINTL XIAOHU
                        PRINTW 這樣的人
                        PRINTL 個個都是頂天立地，s賽，是吧
                        PRINTL 要麽就是頂天立地的路人選手
                        PRINTW 要麽就是s賽大殺四方的人
                        PRINTW 現在的s11呢，國服前十都是誰
                        PRINTW 惹
                        PRINTW 完全看不出來誰頂天立地了
                        PRINTL 你告訴我
                        PRINTL 含金量來説
                        PRINTL 一二三四，五，六七八，九十這十個人的含金量
                        PRINTL 跟這十個人的含金量
                        PRINTL 我覺得
                        PRINTL 這裏面隨便出來一個人
                        PRINTW 他們的含金量都碾壓這十個人
                        PRINTL 這就是
                        PRINTW s6和s5的含，金，量
                        PRINTW 懂了嗎^^_
                        PRINTL 這就是龍哥，當年這個登頂的含金量有多足
                        PRINTL 爲什麽這些人
                        PRINTL 他現在不來國服登頂了
                        PRINTW 爲什麽呢
                        PRINTW 因爲現在的國服
                        PRINTW 它沒有含，金，量
                        PRINTW 沒問題吧^^_
                        PRINTW 龍哥的表達能力很，很顯而易懂吧^^_
                    CASE 2
                        PRINTL 瑟提！
                        TWAIT 1000, 0
                        PRINTL 這把是不是你打的有問題？！
                        TWAIT 1000, 0
                        PRINTL 瑟提說對嗯嗯嗯是我打的有問題
                        TWAIT 1000, 0
                        PRINTL 彈幕還得合計呢
                        TWAIT 1000, 0
                        PRINTL 欸主播你是不是給人潑髒水啊
                        TWAIT 1000, 0
                        PRINTL 就他
                        TWAIT 1000, 0
                        PRINTL 承認了自己打得很垃圾
                        TWAIT 1000, 0
                        PRINTL 爲什麽你們這幫XX還是要會人洗呢
                        TWAIT 1000, 0
                        PRINTL 爲什麽現在還不Q？
                        TWAIT 500, 0
                        PRINTL 爲什麽不Q？
                        TWAIT 1000, 0
                        PRINTL 現在爲什麽還不Q？
                        TWAIT 500, 0
                        PRINTL 爲什麽還不Q？
                        TWAIT 1000, 0
                        PRINTL A一下
                        TWAIT 400, 0
                        PRINTL AQ
                        TWAIT 300, 0
                        PRINTL Q呢Q呢
                        TWAIT 800, 0
                        PRINTL 爲什麽不Q這個人？
                        TWAIT 1000, 0
                        PRINTL Q打斷別人的E呀！
                        TWAIT 2000, 0
                        FONTBOLD
                        PRINTL 我闡釋你的夢！！！！！！！
                        TWAIT 2000, 0
                        PRINTW 哇襖！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！！
                        FONTREGULAR
                ENDSELECT
                CLEARLINE LINECOUNT - 行數
                GOTO 開始位置
            ENDIF
        ENDIF
ENDSELECT