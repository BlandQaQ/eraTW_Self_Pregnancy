;--------------------------------------------------
;拆家
;--------------------------------------------------
@k1011Destroy
	#DIM costMoney
	;8013难度(0简单,不触发)
	IF K1011TrainStartFirst:拆家 && K1011Difficult && !K1011PreventDestroy && k1011GetTalent("疯狂")
		DRAWLINE
		;反发3
		IF k1011GetMark("反发刻印") == 3 
			IF RAND:3 == 0
				;扣体力最大值
				CALL k1011AddMaxbase("体力", - (50 + RAND:50))
				;扣体力
				CALL k1011AddBase("体力", - (250 + RAND:200))
				costMoney = MIN(MONEY / 4, 200000)
				MONEY -= costMoney
				CALL k1011GP("L", @" 房间被毁坏了接近一半、估计修理要花上${costMoney}")
				CALL k1011GP("L", @" 芙兰手上满是血、不知道是不是在什麼时候体力不支、受了伤")
			ELSEIF RAND:2 == 0
				;扣体力最大值
				CALL k1011AddMaxbase("体力", - (20 + RAND:30))
				;扣体力
				CALL k1011AddBase("体力", - (100 + RAND:200))
				costMoney = MIN(MONEY / (4 + RAND:4), 100000)
				MONEY -= costMoney
				CALL k1011GP("L", @" 房间的墙壁有裂痕、修理费要花上${costMoney}")
				CALL k1011GP("L", @" 芙兰的手受伤了、体力也减少了")
			ELSE
				;扣体力最大值
				CALL k1011AddMaxbase("体力", - (40 + RAND:40))
				;扣体力
				CALL k1011AddBase("体力", - (400 + RAND:100))
				CALL k1011GP("L", @" 芙兰遍体鳞伤。")
				CALL k1011GP("L", @" 看到自己身上的血迹、芙兰总算平静了下来")
			ENDIF
			PRINTL 　
			CALL k1011GP("W", @" 简直无从下手调教、为了她自己、还是交给熟悉她的人比较好")
		ELSEIF k1011GetMark("反发刻印") == 2
			IF RAND:2 == 0
				;扣体力最大值
				CALL k1011AddMaxbase("体力", - (10 + RAND:15))
				;扣体力
				CALL k1011AddBase("体力", - (100 + RAND:50))
				costMoney = MIN(MONEY / (13 + RAND:7), 50000)
				MONEY -= costMoney
				CALL k1011GP("L", @" 间里到处都是闹事的痕迹、以防万一、有必要用话${costMoney}修好吧")
				CALL k1011GP("W", @" 芙兰受伤了、体力不支")
			ELSE
				;扣体力最大值
				CALL k1011AddMaxbase("体力", - (5 + RAND:15))
				;扣体力
				CALL k1011AddBase("体力", - (50 + RAND:100))
				costMoney = MIN(MONEY / (20 + RAND:5), 50000)
				MONEY -= costMoney
				CALL k1011GP("L", @" 房间的墙壁有裂痕。修理费要花上${costMoney}")
				CALL k1011GP("W", @" 芙兰的手受伤了、体力也减少了")
			ENDIF
			IF RAND:4 == 0
				CALL k1011GP("W", @" 看起来有点棘手。要是能想点办法让她冷静下来就好了")
			ENDIF
		ELSEIF k1011GetMark("反发刻印") == 1
			;扣体力最大值
			CALL k1011AddMaxbase("体力", - (5 + RAND:10))
			;扣体力
			CALL k1011AddBase("体力", - (50 + RAND:80))
			costMoney = MIN(MONEY / (25 + RAND:5), 10000)
			MONEY -= costMoney
			CALL k1011GP("L", @" 房间里的东西坏了几个、修理费要花上${costMoney}")
			CALL k1011GP("W", @" 芙兰的手受伤了、体力也减少了")
		ELSEIF k1011GetMark("反发刻印") == 0
			IF RAND:2
				;扣体力
				CALL k1011AddBase("体力", 200)
				CALL k1011GP("W", @" 芙兰受了一点小伤、看样子是自己弄的伤")
			ENDIF
		ENDIF
	ENDIF
